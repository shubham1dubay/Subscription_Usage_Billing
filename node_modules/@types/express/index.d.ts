import bodyParser = require("body-parser");
import * as core from "express-serve-static-core";
import * as qs from "qs";
import serveStatic = require("serve-static");

declare function e(): core.Express;

declare namespace e {
    var json: typeof bodyParser.json;
    var raw: typeof bodyParser.raw;
    var text: typeof bodyParser.text;
    var application: Application;
    var request: Request;
    var response: Response;
    var static: serveStatic.RequestHandlerConstructor<Response>;
    var urlencoded: typeof bodyParser.urlencoded;

    export function query(options: qs.IParseOptions | typeof qs.parse): Handler;
    export function Router(options?: RouterOptions): core.Router;

    interface RouterOptions {
        caseSensitive?: boolean | undefined;
        mergeParams?: boolean | undefined;
        strict?: boolean | undefined;
    }

    interface Application extends core.Application { }
    interface CookieOptions extends core.CookieOptions { }
    interface Errback extends core.Errback { }
    interface ErrorRequestHandler<
        P = core.ParamsDictionary,
        ResBody = any,
        ReqBody = any,
        ReqQuery = core.Query,
        Locals extends Record<string, any> = Record<string, any>,
    > extends core.ErrorRequestHandler<P, ResBody, ReqBody, ReqQuery, Locals> { }
    interface Express extends core.Express { }
    interface Handler extends core.Handler { }
    interface IRoute extends core.IRoute { }
    interface IRouter extends core.IRouter { }
    interface IRouterHandler<T> extends core.IRouterHandler<T> { }
    interface IRouterMatcher<T> extends core.IRouterMatcher<T> { }
    interface MediaType extends core.MediaType { }
    interface NextFunction extends core.NextFunction { }
    interface Locals extends core.Locals { }
    interface Request<
        P = core.ParamsDictionary,
        ResBody = any,
        ReqBody = any,
        ReqQuery = core.Query,
        Locals extends Record<string, any> = Record<string, any>,
    > extends core.Request<P, ResBody, ReqBody, ReqQuery, Locals> { }
    interface RequestHandler<
        P = core.ParamsDictionary,
        ResBody = any,
        ReqBody = any,
        ReqQuery = core.Query,
        Locals extends Record<string, any> = Record<string, any>,
    > extends core.RequestHandler<P, ResBody, ReqBody, ReqQuery, Locals> { }
    interface RequestParamHandler extends core.RequestParamHandler { }
    interface Response<
        ResBody = any,
        Locals extends Record<string, any> = Record<string, any>,
    > extends core.Response<ResBody, Locals> { }
    interface Router extends core.Router { }
    interface Send extends core.Send { }
}

export default e;